# Server Configuration
# Use PORT environment variable (required for Render), fallback to 8080 for local dev
server.port=${PORT:8080}

# Application Configuration
spring.application.name=story-keeper-backend

# Database Provider Configuration
# Set DB_PROVIDER to switch between database providers:
# - postgresql (default) - PostgreSQL database
# - h2 - H2 in-memory database (for local development/testing)
# 
# Database connection can be configured in two ways:
# 1. DATABASE_URL (full connection string, e.g., from Render/Heroku)
#    Format: postgresql://user:password@host:port/database
# 2. Individual environment variables:
#    DB_HOST, DB_PORT, DB_NAME, DB_USERNAME, DB_PASSWORD
# 
# Note: Hibernate dialect is automatically configured based on DB_PROVIDER.
# The DataSource is configured programmatically using the modular provider system.

# JPA/Hibernate Configuration
# Note: database-platform is set dynamically based on DB_PROVIDER via JpaConfig
# You can override it here if needed, but it's recommended to use DB_PROVIDER instead
# Safe default - use 'update' only in dev profile
spring.jpa.hibernate.ddl-auto=validate
# Disabled by default - enable in dev profile
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# Logging Configuration (production-safe defaults)
# Use DEBUG only in dev profile
logging.level.root=INFO
logging.level.com.app=INFO
